<html>
    <head>
        <title>Bullet Chart Test</title>
        <meta charset="UTF-8">
    </head>
    <body>
        <link rel="stylesheet" type="text/css" href="quamoco.css" media="screen" />
        <div style="width:850px;">
        <div id="quamoco-bullets" class="quamoco-bullets quamoco_bullets_widget" style="height:100%;width:100%;">

            <!--[if lte IE 8 ]> <h3>Your browser is out of date and does not support this widget.</h3> <!--[endif]-->
            <!--[if (gte IE 9)|!(IE)]><!-->
            <span id="title-span" style="display:inline;width:100%;">
                <div style="float:left;font-family:sans-serif;width:100%;">
                    <h2 style="display: inline;" id='title-h2'>Quamoco Product Quality</h2>&nbsp;&nbsp;&nbsp; <h3 style="display: inline;" id="compliance">(ISO/IEC 25010)</h3>
                    <div style="display: inline;float:right;font-family:sans-serif;">
                        <form>
                                Model:&nbsp;&nbsp;
                                <select class="td-method" id="model" onchange="updateEverything(this.options[this.selectedIndex].text)">
                                    <option value="quamoco">Quamoco</option>
                                    <option value="qmood">QMOOD</option>
                                    <option value="sqale">SQALE</option>
                                    <option value="columbus">Columbus</option>
                                </select>
                            </form>
                    </div>
                    <hr style="float:left;width:100%"/>
                </div>
            </span>
            <script src="http://d3js.org/d3.v3.min.js"></script>
            <script src="bullets.js"></script>
            <script src="CombinedChart.js"></script>
            <script src="components.js"></script>
            <script src="moment.min.js"></script>
            <script src="jquery-2.1.4.min.js"></script>

            <script>
                // Update the quality display
                function metrics(selected) {
                    if (selected === "quamoco") {
                        return "sc_td_nugroho_principal,sc_td_nugroho_interest,sc_td_nugroho_ratio";
                    } else if (selected === "qmood") {
                        return "sc_td_cast_principal,sc_td_cast_principal";
                    } else if (selected === "columbus") {
                        return "sc_td_chin_principal,sc_td_chin_interest,sc_td_chin_ratio";
                    }
                }

                function setTitle(selected) {
                    if (selected === "Quamoco") {
                        document.getElementById("title-h2").innerHTML = "Quamoco Quality Model";
                        document.getElementById("compliance").innerHTML = "(ISO/IEC 25010)";
                    } else if (selected === "QMOOD") {
                        document.getElementById("title-h2").innerHTML = "QMOOD Quality Model";
                        document.getElementById("compliance").innerHTML = "";
                    } else if (selected === "Columbus") {
                        document.getElementById("title-h2").innerHTML = "Columbus Quality Model";
                        document.getElementById("compliance").innerHTML = "(ISO 9126)";
                    } else if (selected === "SQALE") {
                        document.getElementById("title-h2").innerHTML = "SQALE Quality Model";
                        document.getElementById("compliance").innerHTML = "(ISO 9126)";
                    }
                }

                // Setup the chart width and the data variable
                var chartWidth = $('#quamoco-bullets').parent().width();

                var datas1 = [{
                    "title" : "Quality",
                    "subtitle" : "Between 0.0 and 1.0",
                    "last10max" : 1.0,
                    "last10" : [0.75, 0.5, 0.7, 0.81, 0.79, 0.8, 0.85, 0.9, 0.95, 1.0],
                    "ranges" : [0.9, 0.92, 0.94, 0.96, 0.98],
                    "measures" : [1.0, 1.0],
                    "markers" : [0.98],
                    "value" : [1.0, 0],
                    "grade" : "A"
                }, {
                    "title" : "Functional Suitability",
                    "subtitle" : "Between 0.0 and 1.0",
                    "last10max" : 1.0,
                    "last10" : [0.75, 0.5, 0.7, 0.81, 0.79, 0.8, 0.85, 0.9, 0.95, 1.0],
                    "ranges" : [0.9, 0.92, 0.94, 0.96, 0.98],
                    "measures" : [1.0, 1.0],
                    "markers" : [0.98],
                    "value" : [1.0, 0],
                    "grade" : "A"
                }, {
                    "title" : "Reliability",
                    "subtitle" : "Between 0.0 and 1.0",
                    "last10max" : 1.0,
                    "last10" : [0.75, 0.5, 0.7, 0.81, 0.79, 0.8, 0.85, 0.9, 0.95, 1.0],
                    "ranges" : [0.9, 0.92, 0.94, 0.96, 0.98],
                    "measures" : [1.0, 1.0],
                    "markers" : [0.98],
                    "value" : [1.0, 0],
                    "grade" : "A"
                }, {
                    "title" : "Performance Efficiency",
                    "subtitle" : "Between 0.0 and 1.0",
                    "last10max" : 1.0,
                    "last10" : [0.75, 0.5, 0.7, 0.81, 0.79, 0.8, 0.85, 0.9, 0.95, 1.0],
                    "ranges" : [0.9, 0.92, 0.94, 0.96, 0.98],
                    "measures" : [1.0, 1.0],
                    "markers" : [0.98],
                    "value" : [1.0, 0],
                    "grade" : "A"
                }, {
                    "title" : "Maintainability",
                    "subtitle" : "Between 0.0 and 1.0",
                    "last10max" : 1.0,
                    "last10" : [0.75, 0.5, 0.7, 0.81, 0.79, 0.8, 0.85, 0.9, 0.95, 1.0],
                    "ranges" : [0.9, 0.92, 0.94, 0.96, 0.98],
                    "measures" : [1.0, 1.0],
                    "markers" : [0.98],
                    "value" : [1.0, 0],
                    "grade" : "A"
                }, {
                    "title" : "Security",
                    "subtitle" : "Between 0.0 and 1.0",
                    "last10max" : 1.0,
                    "last10" : [0.75, 0.5, 0.7, 0.81, 0.79, 0.8, 0.85, 0.9, 0.95, 1.0],
                    "ranges" : [0.9, 0.92, 0.94, 0.96, 0.98],
                    "measures" : [1.0, 1.0],
                    "markers" : [0.98],
                    "value" : [1.0, 0],
                    "grade" : "A"
                }, {
                    "title" : "Portability",
                    "subtitle" : "Between 0.0 and 1.0",
                    "last10max" : 1.0,
                    "last10" : [0.75, 0.5, 0.7, 0.81, 0.79, 0.8, 0.85, 0.9, 0.95, 1.0],
                    "ranges" : [0.9, 0.92, 0.94, 0.96, 0.98],
                    "measures" : [1.0, 1.0],
                    "markers" : [0.98],
                    "value" : [1.0, 0],
                    "grade" : "A"
                }];

                var datas2 = [{
                    "title" : "Quality",
                    "subtitle" : "Between 0.0 and 1.0",
                    "last10max" : 1.0,
                    "last10" : [0.55, 0.75, 0.37, 0.91, 0.29, 0.38, 0.5, 0.19, 0.95, 1.0],
                    "ranges" : [0.9, 0.92, 0.94, 0.96, 0.98],
                    "measures" : [1.0, 1.0],
                    "markers" : [0.98],
                    "value" : [0.5, 0],
                    "grade" : "F"
                }, {
                    "title" : "Functional Suitability",
                    "subtitle" : "Between 0.0 and 1.0",
                    "last10max" : 1.0,
                    "last10" : [0.55, 0.75, 0.37, 0.91, 0.29, 0.38, 0.5, 0.19, 0.95, 1.0],
                    "ranges" : [0.9, 0.92, 0.94, 0.96, 0.98],
                    "measures" : [1.0, 1.0],
                    "markers" : [0.98],
                    "value" : [0.5, 0],
                    "grade" : "F"
                }, {
                    "title" : "Reliability",
                    "subtitle" : "Between 0.0 and 1.0",
                    "last10max" : 1.0,
                    "last10" : [0.55, 0.75, 0.37, 0.91, 0.29, 0.38, 0.5, 0.19, 0.95, 1.0],
                    "ranges" : [0.9, 0.92, 0.94, 0.96, 0.98],
                    "measures" : [1.0, 1.0],
                    "markers" : [0.98],
                    "value" : [0.5, 0],
                    "grade" : "F"
                }, {
                    "title" : "Maintainability",
                    "subtitle" : "Between 0.0 and 1.0",
                    "last10max" : 1.0,
                    "last10" : [0.55, 0.75, 0.37, 0.91, 0.29, 0.38, 0.5, 0.19, 0.95, 1.0],
                    "ranges" : [0.9, 0.92, 0.94, 0.96, 0.98],
                    "measures" : [0.5, 0.75],
                    "markers" : [0.98],
                    "value" : [0.5, 0],
                    "grade" : "F"
                }, {
                    "title" : "Security",
                    "subtitle" : "Between 0.0 and 1.0",
                    "last10max" : 1.0,
                    "last10" : [0.55, 0.75, 0.37, 0.91, 0.29, 0.38, 0.5, 0.19, 0.95, 1.0],
                    "ranges" : [0.9, 0.92, 0.94, 0.96, 0.98],
                    "measures" : [1.0, 1.0],
                    "markers" : [0.98],
                    "value" : [0.5, 0],
                    "grade" : "F"
                }];

                var datas = datas1;
                var chart = null;
                $(document).read(updateEverything(document.getElementById('model').options[document.getElementById('model').selectedIndex].text));
                
                //var chart = d3.CombinedChart().height(45 - 5 - 20).valueFixed(2).containerWidth(chartWidth).data(datas).containerID("#quamoco-bullets").cssclass("quamoco").grade(true);

                //chart.createChart();

                function updateEverything(selected) {
                    setTitle(selected);
                    if (selected === "Quamoco") {
                        datas = datas1;
                    } else if (selected === "QMOOD") {
                        datas = datas2;
                    } else if (selected === "Columbus") {
                        datas = datas2;
                    } else if (selected === "SQALE") {
                        datas = [];
                    }
                    
                    d3.select("#quamoco-bullets").selectAll("svg").remove();
                    if (datas.length == 0)
                        showUnavailable();
                    else {
                        removeUnavailable();
                        chart = d3.CombinedChart().height(45 - 5 - 20).valueFixed(2).containerWidth(chartWidth).data(datas).containerID("#quamoco-bullets").cssclass("quamoco").grade(true);
                        chart.createChart();
                    }
                }
                
                function showUnavailable() {
                    $("#title-span").after('<div id="error" class="rounded-corners"><strong>No data available for selected model.</strong></div>');
                }
                
                function removeUnavailable() {
                    $("#error").remove();
                }
            </script>
            <!--<![endif]-->
            <!--[if (gte IE 9)|!(IE)]><!-->
        </div>
        </div>
    </body>
</html>